<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Verified - Key Download</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: gradientShift 8s ease infinite;
        }
        @keyframes gradientShift {
            0%, 100% { background: linear-gradient(135deg, #10b981 0%, #059669 50%, #047857 100%); }
            50% { background: linear-gradient(135deg, #059669 0%, #047857 50%, #10b981 100%); }
        }
        .success-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 24px;
            padding: 60px 50px;
            max-width: 700px;
            width: 90%;
            text-align: center;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }
        .success-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #10b981, #059669, #047857, #10b981);
            background-size: 200% 100%;
            animation: borderFlow 3s linear infinite;
        }
        @keyframes borderFlow {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        .success-icon {
            font-size: 5rem;
            margin-bottom: 30px;
            display: block;
            animation: successPulse 2s ease-in-out infinite;
        }
        @keyframes successPulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }
        h1 {
            color: #1f2937;
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 20px;
            letter-spacing: -0.02em;
        }
        .subtitle {
            color: #059669;
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 40px;
        }
        .download-status {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            border-left: 5px solid #10b981;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 40px;
            text-align: left;
        }
        .download-status h3 {
            color: #065f46;
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .download-progress {
            background: #047857;
            height: 8px;
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
            position: relative;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #34d399);
            border-radius: 4px;
            animation: downloadProgress 3s ease-out forwards;
        }
        @keyframes downloadProgress {
            0% { width: 0%; }
            100% { width: 100%; }
        }
        .security-instructions {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            text-align: left;
        }
        .security-instructions h3 {
            color: #1f2937;
            font-size: 1.2rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .instruction-list {
            list-style: none;
            padding: 0;
        }
        .instruction-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 18px;
            padding: 15px;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 10px;
            border-left: 3px solid #10b981;
        }
        .instruction-number {
            background: #10b981;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
            flex-shrink: 0;
        }
        .instruction-text {
            color: #374151;
            line-height: 1.6;
        }
        .instruction-text strong {
            color: #1f2937;
        }
        .warning-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 5px solid #f59e0b;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
        }
        .warning-box h4 {
            color: #92400e;
            font-size: 1.1rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .warning-box p {
            color: #374151;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        .action-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .btn {
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            min-width: 200px;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }
        .btn:hover::before {
            left: 100%;
        }
        .btn-primary {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
        }
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(16, 185, 129, 0.4);
        }
        .btn-secondary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
        }
        .file-info {
            background: rgba(255, 255, 255, 0.6);
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .file-info h4 {
            color: #374151;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .file-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        .file-detail {
            text-align: center;
            padding: 15px;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 8px;
        }
        .detail-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: #047857;
            display: block;
        }
        .detail-label {
            font-size: 0.9rem;
            color: #6b7280;
            margin-top: 5px;
        }
        @media (max-width: 768px) {
            .success-container {
                padding: 40px 30px;
                margin: 20px;
            }
            h1 { font-size: 2.2rem; }
            .subtitle { font-size: 1.1rem; }
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            .btn {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
    <script>
        window.onload = function() {
            // Start download animation
            setTimeout(() => {
                const data = {{.KeyJson}};
                const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'credentials.json';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                // Update UI after download
                setTimeout(() => {
                    document.getElementById('downloadStatus').innerHTML =
                        '<h3>✅ Download Complete!</h3><p>Your encrypted key file has been saved to your downloads folder.</p>';
                    document.getElementById('continueBtn').style.display = 'inline-flex';
                }, 500);
            }, 2000);
        };
    </script>
</head>
<body>
<div class="success-container">
    <span class="success-icon">🎉</span>
    <h1>Account Verified!</h1>
    <p class="subtitle">Your secure cryptographic credentials are ready</p>

    <div class="download-status" id="downloadStatus">
        <h3>📥 Downloading Your Key File...</h3>
        <p>Please wait while we prepare your encrypted credentials file.</p>
        <div class="download-progress">
            <div class="progress-bar"></div>
        </div>
    </div>

    <div class="security-instructions">
        <h3>🔐 Essential Security Instructions</h3>
        <ul class="instruction-list">
            <li class="instruction-item">
                <div class="instruction-number">1</div>
                <div class="instruction-text">
                    <strong>Save Securely:</strong> Store your credentials.json file in a secure location, preferably encrypted storage or a password manager.
                </div>
            </li>
            <li class="instruction-item">
                <div class="instruction-number">2</div>
                <div class="instruction-text">
                    <strong>Remember Password:</strong> Your password is required to decrypt the private key for login. Store it safely.
                </div>
            </li>
            <li class="instruction-item">
                <div class="instruction-number">3</div>
                <div class="instruction-text">
                    <strong>Backup Copies:</strong> Create secure backups of both your key file and password in separate locations.
                </div>
            </li>
            <li class="instruction-item">
                <div class="instruction-number">4</div>
                <div class="instruction-text">
                    <strong>Never Share:</strong> Your key file and password should never be shared with anyone or transmitted over insecure channels.
                </div>
            </li>
        </ul>
    </div>

    <div class="warning-box">
        <h4>⚠️ Important Notice</h4>
        <p>If you lose both your key file and password, you will not be able to access your account. There is no password recovery for cryptographic authentication. Please ensure you have secure backups.</p>
    </div>

    <div class="file-info">
        <h4>📄 File Information</h4>
        <div class="file-details">
            <div class="file-detail">
                <span class="detail-value">credentials.json</span>
                <div class="detail-label">Filename</div>
            </div>
            <div class="file-detail">
                <span class="detail-value">AES-256</span>
                <div class="detail-label">Encryption</div>
            </div>
            <div class="file-detail">
                <span class="detail-value">ECDSA</span>
                <div class="detail-label">Key Type</div>
            </div>
            <div class="file-detail">
                <span class="detail-value">PBKDF2</span>
                <div class="detail-label">Derivation</div>
            </div>
        </div>
    </div>

    <div class="action-buttons">
        <a href="/login" class="btn btn-primary" id="continueBtn" style="display: none;">
            🚀 Continue to Login
        </a>
        <a href="/" class="btn btn-secondary">
            🏠 Back to Home
        </a>
    </div>
</div>

<script>
    // Additional security measures
    document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
    });

    document.addEventListener('keydown', function(e) {
        // Disable F12, Ctrl+Shift+I, Ctrl+U
        if (e.key === 'F12' ||
            (e.ctrlKey && e.shiftKey && e.key === 'I') ||
            (e.ctrlKey && e.key === 'u')) {
            e.preventDefault();
        }
    });

    // Clear any sensitive data on page unload
    window.addEventListener('beforeunload', function() {
        // Clear any potential sensitive data from memory
        if (window.crypto && window.crypto.subtle) {
            // Modern browsers - additional security
            sessionStorage.clear();
        }
    });

    // Add some interactive feedback
    document.querySelectorAll('.btn').forEach(btn => {
        btn.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-3px) scale(1.02)';
        });
        btn.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0) scale(1)';
        });
    });
</script>
</body>
</html>